# 状态模式
## 定义
允许对象在内部状态改变时改变其行为。对象看起来好像改变了它的类。

- 状态封装进分离的类
- 把行为委托给代表当前状态的对象
- 行为随着内部状态而改变

> ⭐ 设计原则
> - 开闭原则：对扩展开放，对修改封闭 -> 局部化每个状态的行为
> - 单一责任原则 -> 一个状态类不包含两个状态

## 使用场景
- 每个状态用if语句进行检查其状态的变化（可扩展性差）

## 对比
- 策略模式
  - 可以互换的算法（在运行时改变策略对象）
  - 组合不同的对象改变其行为，配置context
- 状态模式
  - 对象通过改变内部状态来控制行为（改变行为内置在方案中）
  - 在context中改变状态对象来改变其行为

## 代码示例
糖果机控制器
- 糖果机状态：没有25分钱、有25分钱、赢家、糖果已售出、糖果已售罄
- 糖果机行为：投入25分钱、吐出25分钱、转动曲柄、发放糖果、重新填充
- 特殊要求：10%的中奖几率，中奖可额外获得一个糖果
![](img/state_pattern_1.svg)
![](img/state_pattern_2.svg)

- [Java实现](code/Java/state)
- [C++实现](code/C++/state)
- [Python实现](code/Python/state)
